<!DOCTYPE HTML>
<html lang="en"><!-- InstanceBegin template="/Templates/StandardContent.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Create a Dynamic Table of Contents (TOC)</title>
<!-- InstanceEndEditable -->
<link href="../css/oneColFixCtr.css" rel="stylesheet" type="text/css">
<link href="../js/prettify/prettify.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" -->
<style type="text/css">
nav ul {
	list-style-type: none;
	margin-left:0;
	padding-left:0;
}
nav li.H1 {
	padding-left:0em;
}
nav li.H2 {
	padding-left:2em;
	font-weight:bold;
}
nav li.H3 {
	padding-left:4em;
}
nav a {
	text-decoration:none !important;
	color:black !important;
}
</style>
<!-- InstanceEndEditable -->
</head>

<body>
<a href="../index.html" style="float:left"><img src="../img/home-button.svg" border="0"></a><!-- InstanceBeginEditable name="content" -->
<h1>Create a Dynamic Table of Contents (TOC)</h1>
<h2>JavaScript/jQuery Generated TOC</h2>
<h3>Purpose</h3>
<p>For long pages with a lot of content, it may be desirable to have a TOC somewhere on your page. It is far easier to have the TOC dynamically built when the page is loaded by the browser, and the code to do that is suprisingly simple.</p>
<h3>JavaScript Code</h3>
<p>This code will scan through header tags &lt;h1&gt; through &lt;h3&gt; (you can change that on line 6) and will generate a list of links from them.</p>
<pre class="prettyprint linenums">&lt;script type=&quot;text/javascript&quot;&gt;
$(document).ready(function() {
		var toc = '';
		var cntr = 0;
		var tocId;
		function getId(headerText) {
			var idStyle = 'naturalText';
			if (idStyle === 'naturalText') {
				//Change spaces to dashes, and make all lower-case. Limit to six words.
				headerText = headerText.toLocaleLowerCase();
				hdrText = headerText.split(' ', 6);
				return hdrText.join('-');
			} else {
				//the id's should be &quot;toc1&quot;, &quot;toc2&quot;, &quot;toc3&quot;, etc.
				return 'toc' + ++cntr;
			}
		}
		$('h1, h2').each(function(e) {
			$hdr = $(this);
			if (!(tocId = $hdr.attr('id'))) { //hdr does not already have an id
				tocId = getId($hdr.text());
				$hdr.attr('id', tocId);
			}
			toc += '&lt;li class=&quot;' + $hdr[0].tagName + '&quot;&gt;&lt;a href=&quot;#' + tocId + '&quot;&gt;' + $hdr.text() + '&lt;/a&gt;&lt;/li&gt;';
		});
		$('#toc').html('&lt;ul&gt;' + toc + '&lt;/ul&gt;');
	});
&lt;/script&gt;</pre>
<h2>Example</h2>
<p>The following block was dynamically created when this page loaded into your browser.</p>
<div class="callout">
	<p class="title">Table of Contents</p>
	<nav id="toc"></nav>
</div>
<p>In this example, I created an empty <code>&lt;nav&gt;</code> block in the page where the TOC should appear.</p>
<pre class="prettyprint linenums">&lt;nav id=&quot;toc&quot;&gt;&lt;/nav&gt;</pre>
<p>Then, so the list of links doesnâ€™t look quite so ugly, I applied this CSS:</p>
<pre class="prettyprint linenums">
nav ul {
	list-style-type: none;
	margin-left:0;
	padding-left:0;
}
nav li.H1 {
	padding-left:0em;
}
nav li.H2 {
	padding-left:2em;
	font-weight:bold;
}
nav li.H3 {
	padding-left:4em;
}
nav a {
	text-decoration:none;
	color:black;
}</pre>
<!-- InstanceEndEditable -->
<footer>
	<hr>
		<p style="font-size:1rem !important; text-align:left;margin-bottom:1em; float:left;"><a href="https://craig-creeger.github.io/">Table of Contents</a>
		</p>
		<p style="text-align:right; font-size:smaller;">Last updated on 
			<!-- #BeginDate format:Am1 -->December 20, 2015<!-- #EndDate --></p>
		<p class="tagLine" style="clear:left;">Making Every Pixel Count</p>
		<p><span id="copyrightDate">2015</span> &mdash; All rights reserved. <a href="http://pixelpro.biz/" title="Pixel Pro Web Design">Pixel Pro, Inc.</a></p>
</footer>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/prettify/prettify.js"></script>
<!-- InstanceBeginEditable name="footerScripts" --> 
<script type="text/javascript">
$(document).ready(function() {
	var toc = '';
	var cntr = 0;
	var tocId;
	$('h1, h2, h3').each(function(e) {
		$hdr = $(this);
		if (!(tocId = $hdr.attr('id'))) {  //hdr does not already have an id		
			tocId = 'toc' + ++cntr;
			$hdr.attr('id', tocId);
		}
		toc += '<li class="' + $hdr[0].tagName +'"><a href="#' + tocId + '">' + $hdr.text() + '</a></li>';
	});
	$('#toc').html('<ul>' + toc + '</ul>');
});
</script> 
<!-- InstanceEndEditable -->
<script type="text/javascript">
$(function() { //shortcut for $(document).ready();
	prettyPrint();
	
	//Update the Copyright Date in the footer to be the current year.
	var crDate = document.getElementById('copyrightDate');
	var today = new Date();
	crDate.innerHTML = today.getFullYear();
});
</script>
</body>
<!-- InstanceEnd --></html>
