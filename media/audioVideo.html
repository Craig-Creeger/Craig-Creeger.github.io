<!DOCTYPE HTML>
<html lang="en"><!-- InstanceBegin template="/Templates/StandardContent.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Adding HTML5 Media</title>
<!-- InstanceEndEditable -->
<link href="../css/oneColFixCtr.css" rel="stylesheet" type="text/css">
<link href="../js/prettify/prettify.css" rel="stylesheet" type="text/css">
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
</head>

<body>
<a href="../index.html" style="float:left"><img src="../img/home-button.svg" border="0"></a><!-- InstanceBeginEditable name="content" -->
<div class="title">Adding HTML5 Media</div>
<h1><a name="audio"></a>Audio</h1>

<p>HTML5 audio is created with the <code>&lt;audio&gt;</code> tag.</p>
<pre class="prettyprint linenums">&lt;audio controls preload=&quot;none&quot;&gt;
	&lt;source src=<wbr>&quot;assets/<wbr>audio1.mp3&quot; type=<wbr>&quot;audio/<wbr>mpeg&quot;&gt;
	&lt;source src=<wbr>&quot;assets/<wbr>audio1.ogg&quot; type=<wbr>&quot;audio/<wbr>ogg&quot;&gt;
&lt;/audio&gt;</pre>
<div class="halfWidthBox">Looking for a cross-browser solution? Try <a href="mediaelement/demo/mediaelementPxPro.html">MediaElement</a> for both audio and video. An audio only solution, that should work good for games, is <a href="https://github.com/goldfire/howler.js" rel="external">Howler</a>.</div><p>&nbsp;</p>
<audio controls preload="none">
	<source src="../assets/audio/audio1.mp3" type="audio/mpeg">
	<source src="../assets/audio/audio1.ogg" type="audio/ogg">
</audio>
<p style="margin-top:1.5em;">The <code>controls</code> attribute will display the browser's default audio controls. Include the <code>loop</code> attribute to make the audio play continuously. The browser will choose the first <code>&lt;source&gt;</code> file that it knows how to play. It is also possible to embed a Flash back-up inside the <code>&lt;audio&gt;</code> tag below the last <code>&lt;source&gt;</code> tag.</p>
<h2>Converting Audio Formats</h2>
<p>Use the open-source program <em>Audacity</em> to create the various file formats.</p>
<h1><a name="video"></a>Video</h1>
<video controls preload="none" width="854" height="480">
	<source type="video/mp4" src="http://media.w3.org/2010/05/sintel/trailer.mp4">
</video>
<p>W3C has a <a href="http://www.w3.org/2010/05/video/mediaevents.html" rel="external">great demonstration</a> of video events, properties, and methods.</p>
<p>Native support for the various video containers (i.e. No need to install a plug-in.)</p>
<table cellspacing="0" class="dataTable">
	<thead>
		<tr>
			<th><strong>Container (video codec)</strong></th>
			<th align="center"><strong>MS IE9 (Trident)</strong></th>
			<th align="center"><strong>Safari (Webkit)</strong></th>
			<th align="center"><strong>Firefox (Gecko)</strong></th>
			<th align="center"><strong>Chrome (Webkit)</strong></th>
			<th align="center"><strong>Opera (Presto) <span style="font-weight:normal; font-size:smaller;">Although, Opera will be switching to webkit soon.</span></strong></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><a href="fileFormats.html#mp4">MP4</a> (H.264, patented)</td>
			<td align="center">X</td>
			<td align="center">X</td>
			<td align="center">&nbsp;</td>
			<td align="center">X</td>
			<td align="center">&nbsp;</td>
		</tr>
		<tr>
			<td><a href="fileFormats.html#ogg">OGG</a> (Theora, royalty-free)</td>
			<td align="center">&nbsp;</td>
			<td align="center">&nbsp;</td>
			<td align="center">X</td>
			<td align="center">X</td>
			<td align="center">X</td>
		</tr>
		<tr>
			<td><a href="fileFormats.html#webm">WebM</a> (VP8, royalty-free) <span style="font-size:smaller;">I think this video format is dying a slow death. I don’t bother with it anymore.</span></td>
			<td align="center">&nbsp;</td>
			<td align="center">&nbsp;</td>
			<td align="center">X</td>
			<td align="center">X</td>
			<td align="center">X</td>
		</tr>
	</tbody>
</table>
<p>&nbsp;</p>
<p>HMTL5 video is done the same way as <code><a href="#audio">&lt;audio&gt;</a></code>.</p>
<pre class="prettyprint linenums">&lt;video controls preload=&quot;none&quot;&gt;
	&lt;source src=&quot;assets/ShortVideoTest.mp4&quot; type=&quot;video/mp4&quot;&gt;
	&lt;source src=&quot;assets/ShortVideoTest.webm&quot; type=&quot;video/webm&quot;&gt;
	&lt;source src=&quot;assets/ShortVideoTest.ogv&quot; type=&quot;video/ogg&quot;&gt;
&lt;/video&gt;</pre>
<p>Due to a bug in iOS, you should always place <code>mp4</code> first. Then it may be best to go <code>webm</code>, and <code>ogv</code>.</p>
<h2>Common Attributes</h2>
<ul>
	<li>preload=&quot;none&quot;</li>
	<li>controls</li>
	<li>loop</li>
	<li>autoplay</li>
	<li>poster=&quot;your.jpg&quot; (IE ignores this, it always uses the first frame of the video.)</li>
	<li>width, height</li>
	<li>src=&quot;yourVideo.mp4&quot;</li>
</ul>
<h1>Custom Control Buttons</h1>
<p>The Audio and Video tags expose an API you can hook into for controlling the media if you do not want to use the brower’s native transport buttons. Use code similar to this:</p>
<pre class="prettyprint linenums">var myAudio = document.getElementsByTagName('audio')[0];
 	
document.getElementById('btnPause').onclick = function() {
	myAudio.pause();
};
document.getElementById('btnPlay').onclick = function() {
	myAudio.play();
};
document.getElementById('btnRewind').onclick = function() {
	myAudio.currentTime = 0;
	myAudio.play();
};</pre>
<h1>Help, It's Not Working</h1>
<p><span style="color:red; font-weight:bold;">The most important thing to remember</span> is to make sure your server is serving video files with the correct MIME type in the Content-Type header. If not, videos might not work properly, even if they were working on a local copy of your site. In an Apache <code>httpd.conf</code> it's enough by adding these lines:</p>
<pre class="prettyprint linenums">AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm</pre>
<p>Some web hosts, in trying to save bandwidth, gzip everything by default—including video files! In Firefox and Opera, seeking will not be possible or the video may not play at all if a video file is gzipped. If this is occurring to you please check your server / hosts and disable the gzipping of Ogg and other media files. You can switch off gzipping for video files in your .htaccess file by adding this line:</p>
<pre class="prettyprint linenums">SetEnvIfNoCase Request_URI \.(og[gv]|mp4|m4v|webm)$ no-gzip dont-vary
</pre>
<h2><a name="convertVideo"></a>Converting  Video Formats</h2>
<p>You can use VLC to convert to OGV (theora) video, but sometimes the quality isn't very good. It is very fast however. Otherwise, try <a href="http://firefogg.org/" rel="external">Firefogg</a> with these settings:</p>
<p class="code"> video bit rate=512</p>
<p class="code"> vid quality=blank</p>
<p class="code"> audio quality=1.0</p>
<p class="code"> mono</p>
<p>Handbrake can also be used to make  conversions to h.264, but be sure to <a href="http://www.wfu.edu/~yipcw/atg/hd/h264/moovatom/" rel="external">check the &quot;web optimized&quot; checkbox to allow the video to load progressively</a>.</p>
<div class="callout">
	<h3>Progressive Download of Video Files</h3>
	<p>There doesn’t ever seem to be a problem with OGG Video files, but h.264 videos have wasted me a lot of time. The videos can be encoded with file information at the beginning of the file, or at the end. If that information is at the end, then the entire video must be downloaded before it will begin playing. On the other hand, pushing that data (A separate “hint” track is used to include streaming information in the file.) to the beginning of the file will allow for progressive download.</p>
	<h3>Definition of Terms</h3>
	<p>This is also a good time to define <em>progressive</em> download and <em>streaming</em> video. The terms are often, in error, used interchangably. With streaming video, it is possible to jump to a specific location in the video and dynamically alter the bit-rate depending on the internet connection speed. It takes a dedicated video server and specialized software to offer true streaming video. Leave that to the pros.</p>
	<p>For a small-business or hobbyist website, progressive downloading is what you want. The video will start at the beginning, and will start to play just as soon as there is enough frames in the buffer to allow smooth playback.</p>
</div>
<p><a href="http://www.getmiro.com/" rel="external">Miro</a> is a free video converter for the Mac but it is too simple to use; there are no settings for tweaking the conversion.</p>
<p>There is a <a href="../assets/Adobe Video Tools.zip">F4V Post Processor and FLVCheck</a> tool from Adobe that might be able to fix some playback problems if you are having troubles with your F4V file.</p>
<h1>Backwards Compatibility with Flash</h1>
<p>I have tried several solutions, but the easiest and most robust method is the <a href="mediaelement/demo/mediaelementPxPro.html">MediaElement</a> solution. Highly recommended.</p><!-- InstanceEndEditable -->
<footer>
		<hr>
		<p style="font-size:1rem !important; text-align:left;margin-bottom:1em; float:left;"><a href="https://craig-creeger.github.io/">Table of Contents</a>
		</p>
		<p style="text-align:right; font-size:smaller;">Last updated on 
			<!-- #BeginDate format:Am1 -->October 28, 2015<!-- #EndDate --></p>
		<p class="tagLine" style="clear:left;">Making Every Pixel Count</p>
		<p><span id="copyrightDate">2015</span> &mdash; All rights reserved. <a href="http://pixelpro.biz/" title="Pixel Pro Web Design">Pixel Pro, Inc.</a></p>
</footer>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/prettify/prettify.js"></script>
<!-- InstanceBeginEditable name="footerScripts" --> 

<!-- InstanceEndEditable -->
<script type="text/javascript">
$(function() { //shortcut for $(document).ready();
	prettyPrint();
	
	//Update the Copyright Date in the footer to be the current year.
	var crDate = document.getElementById('copyrightDate');
	var today = new Date();
	crDate.innerHTML = today.getFullYear();
});
</script>
</body>
<!-- InstanceEnd --></html>
